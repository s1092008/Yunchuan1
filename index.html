<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gyro Game</title>
    <style>
      #ship {
        width: 50px;
        height: 50px;
        background-color: blue;
        position: absolute;
      }
    </style>
  </head>
  <body>
    <div id="ship"></div>

    <script>
      if (typeof DeviceOrientationEvent.requestPermission === "function") {
        DeviceOrientationEvent.requestPermission()
          .then((permissionState) => {
            if (permissionState === "granted") {
              // 用户已授权使用陀螺仪
              startGyroGame();
            } else {
              // 用户拒绝了请求或权限不可用
              alert("Permission denied for using device orientation.");
            }
          })
          .catch(console.error);
      } else {
        alert(
          "Device orientation not supported or permission API not available."
        );
      }

      function startGyroGame() {
        window.addEventListener("deviceorientation", handleOrientation);
      }

      function handleOrientation(event) {
        const ship = document.getElementById("ship");
        const tiltLR = event.gamma; // 左右倾斜角度
        const tiltFB = event.beta; // 前后倾斜角度

        // 根据倾斜角度移动船只
        const maxMovement = 20; // 设置船只最大移动距离
        const movementLR = (tiltLR / 90) * maxMovement; // 根据倾斜角度计算水平移动距离
        const movementFB = (tiltFB / 90) * maxMovement; // 根据倾斜角度计算垂直移动距离

        // 在水平和垂直方向移动船只
        ship.style.left = `${50 + movementLR}px`; // 船只左右移动
        ship.style.top = `${50 + movementFB}px`; // 船只上下移动
      }
    </script>
  </body>
</html>
